# The Prometheus and Alertmanager sandbox

This Dockerized and Docker Composed Prometheus and Alertmanager proof-of-concept project spins up:
* A Prometheus server
* A clustered Alertmanager (three containers) 
* A helper service [`ehko`](https://github.com/mikejoh/ehko) that can e.g. receive alerts
* A blackbox-exporter that probes URLs and exports metrics

The Alertmanager cluster is fully meshed, every Alertmanager are configured with itself and all of the other Alertmanagers as cluster peers. To check the cluster status browse to: http://localhost:9001 (any active Alertmanger will be fine)

The script `send_alert.sh` sends a test alert to each one of the Alertmanagers.

Check out the `config/` directory for all configuration files used in this proof-of-concept. 

## How-to:

1. Run the `init.sh` bash script to fix permissions on directories used by the different components of this PoC.
2. Run `docker-compose` to start the environment: `docker-compose up -d`

To clean up all data generated by the containers run the `cleanup.sh` script.

## Exposed services

* Prometheus: http://localhost:9090
* Alertmanager 1: http://localhost:9001
* Alertmanager 2: http://localhost:9002
* Alertmanager 3: http://localhost:9003
* Helper service `ehko`: http://localhost:5001
* Blackbox Exporter: http://localhost:9115