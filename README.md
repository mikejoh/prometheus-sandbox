# The Prometheus Sandbox

This Dockerized and Docker Composeified Prometheus proof-of-concept project spins up:
* A Prometheus server
* A clustered Alertmanager (three containers) 
* A helper service (to receive alerts and echoing them to `stdout`)
* An Nginx server, serving a default page and the `stub_status` page
* An nginx-exporter, exports nginx metrics by parsing the `stub_status`
* A blackbox-exporter that probes URLs and exports metrics

The Alertmanager cluster is fully meshed, every Alertmanager are configured with itself and all of the other Alertmanagers as cluster peers. To check the cluster status browse to: http://localhost:9001 (any active Alertmanger will be fine)

The script `send_alert.sh` sends a test alert to each one of the alertmanagers, you should see `stdout` messages from the `echo-service` container if tailing the logs.

Check out the `config/` directory for all configuration files used in this proof-of-concept. 

## How-to:

1. Run the `init.sh` bash script to fix permissions on directories used by the different components of this PoC.
2. Run `docker-compose` to start the environment: `docker-compose up -d`

To clean up all data generated by the containers run the `cleanup.sh` script.

## Exposed services

* Prometheus: http://localhost:9090
* Alertmanager 1: http://localhost:9001
* Alertmanager 2: http://localhost:9002
* Alertmanager 3: http://localhost:9003
* Alert receiver `echo-service`: http://localhost:5001
* Blackbox Exporter: http://localhost:9115